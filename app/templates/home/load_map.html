<script>
    var geodata = document.querySelector('meta[name="geojson-data"]').getAttribute('content');
    var vert = document.querySelector('meta[name="map-init"]').getAttribute('vert');
    var hor = document.querySelector('meta[name="map-init"]').getAttribute('hor');
    var zoom = document.querySelector('meta[name="map-init"]').getAttribute('zoom');

    var map = L.map('map', {zoomControl: false}).setView([vert, hor], zoom); // Set initial coordinates and zoom level
    var locked = L.layerGroup();
    var world;

    fetch('static/world.geojson').then(response => response.json())
            .then(data => {
                var geoLayer = L.geoJSON(data, {
                    style: function (feature) {
                        return {
                            fillColor: 'transparent',
                            fillOpacity: 0,
                            weight: 3,
                            color: 'black',
                            dashArray: ''
                        };
                    },
                    interactive: false
                }).addTo(map)

                world = geoLayer;
                world.bringToFront();
            })

    // Function to highlight feature on mouseover
    function highlightFeature(e) {
            var layer = e.target;
            setColor(layer, 'yellow', '', 'black')
        }

        // Function to reset highlight on mouseout
    function resetHighlight(e) {
        var layer = e.target;
        setColor(layer, 'blue', '3', 'black')
    }

    // function to set colours and get the right layers to the front
    function setColor(layer, c, d, l){
        layer.setStyle({
            fillColor: c,
            color: l,
            dashArray: d
        });

        if (!L.Browser.ie && !L.Browser.opera && !L.Browser.edge) {
            layer.bringToFront();
            if(locked._layers){
                locked.eachLayer(function (layer) {
                    layer.bringToFront();
                });
            }
            world.bringToFront();
        }
    }
</script>